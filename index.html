<html>

<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=0.7, maximum-scale=1, viewport-fit=cover, user-scalable=no, shrink-to-fit=no">
    <meta name="HandheldFriendly" content="true">
    <title>Matrix Whiteboard</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="notebook-tree.js"></script>
    <script src="browser-matrix.js"></script>
    <script src="unlimitedCanvas.js"></script>
    <script src="paper-canvas.js"></script>
    <script src="drawing.js"></script>
    <script src="helper.js"></script>
    <script src="tools/line-style-selector.js"></script>
    <script src="tools/tool-pen.js"></script>
    <script src="tools/tool-line.js"></script>
    <script src="tools/tool-eraser.js"></script>
    <script src="tools/tool-rect.js"></script>
    <script src="input.js"></script>
    <script src="actions.js"></script>
    <script src="matrix-client.js"></script>
    <script src="color-picker.js"></script>
    <script src="tools/tool-wheel.js"></script>
    <script src="nodeUsed/paper-core.min.js"></script>

    <link href="style.css" rel="stylesheet" type="text/css"></head>

<body>
    <div id="loading">
        <div style="display: flex; align-content: center; height: 100%;">
            <span id="loading-span"
                style="font-family:sans-serif ;color: white; align-self: center; text-align: center;">Loading</span>
        </div>
    </div>
    <div id="topbar">
        <!-- <img src="icon.svg" style="height: 2em"></img> -->
        <!-- <div class="color-picker"></div> -->
        <!-- <button onclick="sendRandomPath(matrixClient, currentRoomId)">RandomPath</button> -->
        <!-- <button onclick="sendRandomWalk(matrixClient, currentRoomId)">RandomWalk</button> -->
        <!-- <button onclick="sendCustomEvent(matrixClient, currentRoomId)">sendCustomEvent (p.Whiteboard.object of type p.path)</button> -->
        <!-- <button onclick="sendRandomText(matrixClient, currentRoomId)">RandomText</button> -->
        <button onclick="replaceLastEvent(matrixClient, currentRoomId)">ReplaceLast</button>
        <button onclick="redactLastAction(matrixClient, currentRoomId)">redact Last</button>
        <br />
        <button
            onclick="scrollback(currentRoomId, 1000).then(function(){drawing_canvas.reload(),drawing_canvas.updateDisplay();});">Load
            History</button>
        <button onclick="reloadCacheCanvas();drawing_canvas.updateDisplay();">reload Canvas</button>
        <button onclick="drawing_canvas.resetOffset()">go Home</button>
        <!-- <button onclick="loginClicked()">login</button> -->
        <button onclick="drawing_canvas.resetZoom()">reset Zoom</button>
        <!-- <button id="grid" onclick="toggleGrid()">toggle Grid</button> -->
        <!-- <button id="tool" onclick="toggleTool()">Tool: pen</button> -->
    </div>

    <div id="leftbar" class="no-room-selected">
        <div id='leftbar-header'>
            <div id="userIdLabel"></div>
        </div>
        <div id='leftbar-expand'>
            <div id='leftbar-body'>
            </div>
            <button id="add-room-button" onclick="showAddRoomMenu()">+</button>
        </div>
        <button onclick="toggleLeftBar()" id='leftbar-footer'>^</button>
    </div>


    <div style="flex-grow: 1; display: flex; flex-direction: row; min-height: 0;">
        <canvas id="paper" resize>
        </canvas>
        <div id="container">
            <svg id="svg-board" style="display: none;">
            </svg>
            <canvas id="canvas" style="display: none;">
            </canvas>
        </div>
    </div>
    <div id='tool-wheel'>
        <canvas id="color-picker-canvas" resize>
        </canvas>
        <button id="settings-button" onclick="showSettingsMenu()"><img src='settings-symbolic.svg'
                width='30px'></img></button>

        <button class='tool-elements' id="tool-type-pen">Pen</button>
        <button class='tool-elements' id="tool-type-eraser">Eraser</button>
        <button class='tool-elements' id="tool-type-marker">Marker</button>
        <button class='tool-elements' id="tool-type-line">Line</button>
        <button class='tool-elements' id="tool-type-square">Square</button>

        <!-- <button id="tool-type-ellipse">Ellipse</button> -->
        <!-- <button id="tool-type-text">Text</button> -->
        <div id="line-type-selector" class='tool-elements'>
            <button id="line-type-selector-button"
                style="width: 100%;height: 100%;margin:0;border-style: none;background-color: transparent;">
                <!-- <div
                    style="background-color: red; border-color: black; border-style: solid; height: 100%;width: 100%;top:0;position: absolute;">
                </div> -->
                <div id="line-style-small"
                    style="border-radius: 50%; background-color: black; width: 2px;height: 2px; left: 50%; top:50%;transform: translate(-50%,-50%);position:absolute">
                </div>
                <div id="line-style-medium"
                    style="border-radius: 50%; background-color: black; width: 5px;height: 5px; left: 50%; top:50%;transform: translate(-50%,-50%);position:absolute">
                </div>
                <div id="line-style-large"
                    style="border-radius: 50%; background-color: black; width: 8px;height: 8px; left: 50%; top:50%;transform: translate(-50%,-50%);position:absolute">
                </div>
                <div id="line-style-large"
                    style="border-radius: 50%; background-color: black; width: 12px;height: 12px; left: 50%; top:50%;transform: translate(-50%,-50%);position:absolute">
                </div>
            </button>
        </div>
    </div>

    <div class="center-container" id="loginContainer">
        <p><span style="font-size: 3em;white-space: pre;font-weight: 100;">The Board</span><span
                style="font-size: 1em;white-space: pre;font-weight: 100;"> (Alpha 0.6)</span></p>
        <!-- <form id="login-form" onsubmit="return formSubmit(event)"> -->
        <label for="username">username:</label><br>
        <input type="text" id="login-form-username" name="username" placeholder="Your matrix id..."><br>
        <label for="login-form-password">password:</label><br>
        <input type="password" id="login-form-password" name="password" placeholder="your password..."><br><br>
        <!-- </form> -->
        <button id="login-submit" class="submit" onclick="loginClicked();">Login</button>
    </div>

    <div class="center-container" id="settings-container" style="display: none;">
        <button style="float: right;" onclick="hideSettingsMenu()">close</button>
        <p id="room-menu-room-id">roomId</p>
    </div>
    <div class="center-container" id="add-room-container" style="display: none;">
        <div style="height:100%;display: flex;flex-direction: column;">
            <div style="flex: 0">
                <button style="float: right;" onclick="hideAddRoomMenu()">close</button>
                <p>Create a new Whiteboard:</p>
            </div>
            <div id="create-room-dialog">
                <input type="text" id="create-board-name" placeholder="Name of new whiteboard"></input>
                <button onclick="createWhiteboard('private', document.getElementById('create-board-name').value).then(()=>{
                updateAddRoomList();
                updateRoomList();
                hideAddRoomMenu();
                })">Create
                    Room</button>
            </div>
            <p>List of all rooms. Choose which one to add to your whiteboard list:</p>
            <div id="add-room-list">

            </div>
        </div>
    </div>
</body>

</html>